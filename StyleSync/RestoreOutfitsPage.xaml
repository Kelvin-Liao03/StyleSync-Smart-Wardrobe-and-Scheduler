<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="StyleSync.RestoreOutfitsPage"
             Title="Restore Outfits"
             BackgroundColor="#F5F7FA">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            <Label Text="â™»ï¸ Restore or Manage Outfits"
                   FontSize="22"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="#2E3A59" />

            <Button Text="ðŸ§¹ Clear Selected"
                    Clicked="OnClearSelectedClicked"
                    BackgroundColor="#F44336"
                    TextColor="White"
                    FontAttributes="Bold"
                    HorizontalOptions="Center"
                    Padding="10,5" />

            <CollectionView x:Name="outfitCollection"
                            ItemsLayout="VerticalList"
                            SelectionMode="None">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BorderColor="Gray" CornerRadius="12" Padding="10" Margin="5" BackgroundColor="White">
                            <Grid x:Name="SelectableGrid"
                  ColumnDefinitions="*,*"
                  ColumnSpacing="10"
                  Padding="5"
                  BackgroundColor="White">
                                <Grid.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnSelectForClearTapped" />
                                </Grid.GestureRecognizers>

                                <!-- Outfit Images -->
                                <VerticalStackLayout Grid.Column="0" Spacing="5">
                                    <Image Source="{Binding TopImage}" HeightRequest="100" WidthRequest="100" Aspect="AspectFill" />
                                    <Image Source="{Binding BottomImage}" HeightRequest="100" WidthRequest="100" Aspect="AspectFill"
                           IsVisible="{Binding HasBottom}" />
                                </VerticalStackLayout>

                                <!-- Info and Action -->
                                <VerticalStackLayout Grid.Column="1" Spacing="5">
                                    <Label Text="{Binding Occasion}" FontAttributes="Bold" TextColor="Black" FontSize="16" />
                                    <Label Text="{Binding EventDateFormatted}" TextColor="DarkGray" FontSize="14" />
                                    <Label Text="{Binding Status}" TextColor="DarkGreen" FontSize="14" />

                                    <HorizontalStackLayout Spacing="10" Margin="0,10,0,0">
                                        <Button Text="âœ… Restore"
                                        Clicked="OnRestoreClicked"
                                        BackgroundColor="#198754"
                                        TextColor="White"
                                        IsVisible="{Binding IsWorn}" /> 

                                        <Button Text="âŒ Cancel"
                                        Clicked="OnCancelClicked"
                                        BackgroundColor="#DC3545"
                                        TextColor="White"
                                        IsVisible="{Binding IsScheduledAndNotReturned}" />

                                        <Button Text="âœï¸ Edit Date"
                                        Clicked="OnEditDateClicked"
                                        BackgroundColor="#FFC107"
                                        TextColor="Black"
                                        IsVisible="{Binding IsEditableDate}" />

                                    </HorizontalStackLayout>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
